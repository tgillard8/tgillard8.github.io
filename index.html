<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netflix Originals IMDB Scores</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <header>
        <h1>Netflix Originals Data Visualization</h1>
    </header>
    
    <main>
        <section>
            <h2>Distribution of IMDB Scores by Top 5 Genres</h2>
            <div id="chart"></div>
            <div id="tooltip" style="position: absolute; opacity: 0; background-color: white; border: 1px solid #ccc; padding: 8px; border-radius: 4px; pointer-events: none;"></div>
            <button id="resetZoom" style="margin-top: 20px;">Reset Zoom</button>
        </section>
    </main>
    
    <script>
        // Sample data for the chart
        const data = [
            { genre: "Documentary", score: 2.5 },
            { genre: "Documentary", score: 3.2 },
            { genre: "Documentary", score: 4.0 },
            { genre: "Documentary", score: 6.5 },
            { genre: "Documentary", score: 7.1 },
            { genre: "Thriller", score: 2.6 },
            { genre: "Thriller", score: 4.5 },
            { genre: "Thriller", score: 5.8 },
            { genre: "Thriller", score: 6.2 },
            { genre: "Thriller", score: 7.0 },
            { genre: "Science fiction/Drama", score: 2.6 },
            { genre: "Science fiction/Drama", score: 4.2 },
            { genre: "Science fiction/Drama", score: 5.0 },
            { genre: "Science fiction/Drama", score: 5.9 },
            { genre: "Science fiction/Drama", score: 6.8 },
            { genre: "Horror thriller", score: 3.2 },
            { genre: "Horror thriller", score: 4.0 },
            { genre: "Horror thriller", score: 4.8 },
            { genre: "Horror thriller", score: 5.5 },
            { genre: "Horror thriller", score: 6.7 },
            { genre: "Mystery", score: 3.4 },
            { genre: "Mystery", score: 4.3 },
            { genre: "Mystery", score: 5.2 },
            { genre: "Mystery", score: 6.1 },
            { genre: "Mystery", score: 7.3 }
        ];

        // Set dimensions and margins
        const margin = { top: 50, right: 30, bottom: 70, left: 50 },
              width = 800 - margin.left - margin.right,
              height = 500 - margin.top - margin.bottom;

        // Append the SVG element
        const svg = d3.select("#chart")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", `translate(${margin.left}, ${margin.top})`);

        // Tooltip element
        const tooltip = d3.select("#tooltip");

        // X scale and axis
        const x = d3.scalePoint()
            .domain(data.map(d => d.genre))
            .range([0, width])
            .padding(0.5);

        svg.append("g")
            .attr("transform", `translate(0, ${height})`)
            .call(d3.axisBottom(x))
            .selectAll("text")
            .attr("transform", "translate(-10,0)rotate(-45)")
            .style("text-anchor", "end");

        // Y scale and axis
        const y = d3.scaleLinear()
            .domain([0, 10])
            .range([height, 0]);

        svg.append("g")
            .call(d3.axisLeft(y));

        // Add dots with tooltip and zoom effect
        svg.selectAll("dot")
            .data(data)
            .enter()
            .append("circle")
            .attr("cx", d => x(d.genre))
            .attr("cy", d => y(d.score))
            .attr("r", 5)
            .style("fill", "#69b3a2")
            .style("opacity", 0.7)
            .on("mouseover", function(event, d) {
                d3.select(this)
                    .transition()
                    .duration(200)
                    .attr("r", 8)
                    .style("fill", "#e50914");
                tooltip.transition().duration(200).style("opacity", 1);
                tooltip.html(`Genre: ${d.genre}<br>IMDB Score: ${d.score}`)
                    .style("left", (event.pageX + 10) + "px")
                    .style("top", (event.pageY - 20) + "px");
            })
            .on("mouseout", function(event, d) {
                d3.select(this)
                    .transition()
                    .duration(200)
                    .attr("r", 5)
                    .style("fill", "#69b3a2");
                tooltip.transition().duration(200).style("opacity", 0);
            });

        // Add reset zoom button functionality
        d3.select("#resetZoom").on("click", () => {
            svg.transition().duration(750)
                .attr("transform", `translate(${margin.left}, ${margin.top})`);
        });
    </script>
</body>
</html>
